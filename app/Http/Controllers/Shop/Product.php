<?php
namespace App\Http\Controllers\Shop; use Illuminate\Database\Eloquent\Relations\Relation; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use App\Library\Response; class Product extends Controller { function get(Request $sp26e527) { $sp735ffa = (int) $sp26e527->post('category_id'); if (!$sp735ffa) { return Response::forbidden(trans('shop.category.required')); } $sp08b465 = \App\Category::where('id', $sp735ffa)->first(); if (!$sp08b465) { return Response::forbidden(trans('shop.category.not_found')); } if ($sp08b465->password_open && $sp26e527->post('password') !== $sp08b465->password) { return Response::fail(trans('shop.category.password_error')); } $sp19cd84 = \App\Product::where('category_id', $sp735ffa)->where('enabled', 1)->orderBy('sort')->get(); foreach ($sp19cd84 as $sp222f58) { $sp222f58->setForShop(); } return Response::success($sp19cd84); } function verifyPassword(Request $sp26e527) { $sp517398 = (int) $sp26e527->post('product_id'); if (!$sp517398) { return Response::forbidden(trans('shop.product.required')); } $sp222f58 = \App\Product::where('id', $sp517398)->first(); if (!$sp222f58) { return Response::forbidden(trans('shop.product.not_found')); } if ($sp222f58->password_open && $sp26e527->post('password') !== $sp222f58->password) { return Response::fail(trans('shop.product.password_error')); } return Response::success(); } }