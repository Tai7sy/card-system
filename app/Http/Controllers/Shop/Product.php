<?php
namespace App\Http\Controllers\Shop; use Illuminate\Database\Eloquent\Relations\Relation; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use App\Library\Response; class Product extends Controller { function get(Request $sp510ef3) { $sp40435f = (int) $sp510ef3->post('category_id'); if (!$sp40435f) { return Response::forbidden(trans('shop.category.required')); } $sp577aae = \App\Category::where('id', $sp40435f)->first(); if (!$sp577aae) { return Response::forbidden(trans('shop.category.not_found')); } if ($sp577aae->password_open && $sp510ef3->post('password') !== $sp577aae->password) { return Response::fail(trans('shop.category.password_error')); } $spf9727f = \App\Product::where('category_id', $sp40435f)->where('enabled', 1)->orderBy('sort')->get(); foreach ($spf9727f as $spd39704) { $spd39704->setForShop(); } return Response::success($spf9727f); } function verifyPassword(Request $sp510ef3) { $sp2f9632 = (int) $sp510ef3->post('product_id'); if (!$sp2f9632) { return Response::forbidden(trans('shop.product.required')); } $spd39704 = \App\Product::where('id', $sp2f9632)->first(); if (!$spd39704) { return Response::forbidden(trans('shop.product.not_found')); } if ($spd39704->password_open && $sp510ef3->post('password') !== $spd39704->password) { return Response::fail(trans('shop.product.password_error')); } return Response::success(); } }