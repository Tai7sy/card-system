<?php
namespace App\Http\Controllers\Shop; use Illuminate\Database\Eloquent\Relations\Relation; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use App\Library\Response; class Product extends Controller { function get(Request $sp147552) { $sp43c1c1 = (int) $sp147552->post('category_id'); if (!$sp43c1c1) { return Response::forbidden(trans('shop.category.required')); } $sp62ae3e = \App\Category::where('id', $sp43c1c1)->first(); if (!$sp62ae3e) { return Response::forbidden(trans('shop.category.not_found')); } if ($sp62ae3e->password_open && $sp147552->post('password') !== $sp62ae3e->password) { return Response::fail(trans('shop.category.password_error')); } $sp0f92be = \App\Product::where('category_id', $sp43c1c1)->where('enabled', 1)->orderBy('sort')->get(); foreach ($sp0f92be as $sp4aad76) { $sp4aad76->setForShop(); } return Response::success($sp0f92be); } function verifyPassword(Request $sp147552) { $sp52cac1 = (int) $sp147552->post('product_id'); if (!$sp52cac1) { return Response::forbidden(trans('shop.product.required')); } $sp4aad76 = \App\Product::where('id', $sp52cac1)->first(); if (!$sp4aad76) { return Response::forbidden(trans('shop.product.not_found')); } if ($sp4aad76->password_open && $sp147552->post('password') !== $sp4aad76->password) { return Response::fail(trans('shop.product.password_error')); } return Response::success(); } }