<?php
namespace App\Http\Controllers\Shop; use Illuminate\Database\Eloquent\Relations\Relation; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use App\Library\Response; class Product extends Controller { function get(Request $spe5a184) { $sp23779d = (int) $spe5a184->post('category_id'); if (!$sp23779d) { return Response::forbidden(trans('shop.category.required')); } $spf6286b = \App\Category::where('id', $sp23779d)->first(); if (!$spf6286b) { return Response::forbidden(trans('shop.category.not_found')); } if ($spf6286b->password_open && $spe5a184->post('password') !== $spf6286b->password) { return Response::fail(trans('shop.category.password_error')); } $spec356e = \App\Product::where('category_id', $sp23779d)->where('enabled', 1)->orderBy('sort')->get(); foreach ($spec356e as $spb395ca) { $spb395ca->setForShop(); } return Response::success($spec356e); } function verifyPassword(Request $spe5a184) { $sp89bb44 = (int) $spe5a184->post('product_id'); if (!$sp89bb44) { return Response::forbidden(trans('shop.product.required')); } $spb395ca = \App\Product::where('id', $sp89bb44)->first(); if (!$spb395ca) { return Response::forbidden(trans('shop.product.not_found')); } if ($spb395ca->password_open && $spe5a184->post('password') !== $spb395ca->password) { return Response::fail(trans('shop.product.password_error')); } return Response::success(); } }