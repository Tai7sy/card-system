<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $sp147552) { $spa27b73 = $sp147552->input('user_id'); $spe11fbc = $sp147552->input('action', \App\Log::ACTION_LOGIN); $spd10097 = \App\Log::where('action', $spe11fbc); $spd10097->where('user_id', Auth::id()); $sp7b3d9e = $sp147552->input('start_at'); if (strlen($sp7b3d9e)) { $spd10097->where('created_at', '>=', $sp7b3d9e . ' 00:00:00'); } $spb32fb2 = $sp147552->input('end_at'); if (strlen($spb32fb2)) { $spd10097->where('created_at', '<=', $spb32fb2 . ' 23:59:59'); } $sp95caec = (int) $sp147552->input('current_page', 1); $sp11fa7d = (int) $sp147552->input('per_page', 20); $sp8b8475 = $spd10097->orderBy('created_at', 'DESC')->paginate($sp11fa7d, array('*'), 'page', $sp95caec); return Response::success($sp8b8475); } }