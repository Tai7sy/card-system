<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $spfb5ae3) { $sp134e80 = $spfb5ae3->post('user_id'); $spff4d1e = $spfb5ae3->post('action', \App\Log::ACTION_LOGIN); $sp32b0d3 = \App\Log::where('action', $spff4d1e); $sp32b0d3->where('user_id', Auth::id()); $sp3c0af4 = $spfb5ae3->post('start_at'); if (strlen($sp3c0af4)) { $sp32b0d3->where('created_at', '>=', $sp3c0af4 . ' 00:00:00'); } $spb75c0a = $spfb5ae3->post('end_at'); if (strlen($spb75c0a)) { $sp32b0d3->where('created_at', '<=', $spb75c0a . ' 23:59:59'); } $spd43f26 = $spfb5ae3->post('current_page', 1); $spce7281 = $spfb5ae3->post('per_page', 20); $spfa99a5 = $sp32b0d3->orderBy('created_at', 'DESC')->paginate($spce7281, array('*'), 'page', $spd43f26); return Response::success($spfa99a5); } }