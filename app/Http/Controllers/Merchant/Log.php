<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $sp0aae4c) { $sp9935c9 = $sp0aae4c->post('user_id'); $spb114e5 = $sp0aae4c->post('action', \App\Log::ACTION_LOGIN); $spb0a50e = \App\Log::where('action', $spb114e5); $spb0a50e->where('user_id', Auth::id()); $spee8548 = $sp0aae4c->post('start_at'); if (strlen($spee8548)) { $spb0a50e->where('created_at', '>=', $spee8548 . ' 00:00:00'); } $sp3a7045 = $sp0aae4c->post('end_at'); if (strlen($sp3a7045)) { $spb0a50e->where('created_at', '<=', $sp3a7045 . ' 23:59:59'); } $sp35a866 = $sp0aae4c->post('current_page', 1); $spa0426f = $sp0aae4c->post('per_page', 20); $sp4e4cfe = $spb0a50e->orderBy('created_at', 'DESC')->paginate($spa0426f, array('*'), 'page', $sp35a866); return Response::success($sp4e4cfe); } }