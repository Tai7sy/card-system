<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $sp517903) { $spacf00d = $sp517903->input('user_id'); $sp661453 = $sp517903->input('action', \App\Log::ACTION_LOGIN); $sp30241a = \App\Log::where('action', $sp661453); $sp30241a->where('user_id', Auth::id()); $sp30ea99 = $sp517903->input('start_at'); if (strlen($sp30ea99)) { $sp30241a->where('created_at', '>=', $sp30ea99 . ' 00:00:00'); } $sp8093ee = $sp517903->input('end_at'); if (strlen($sp8093ee)) { $sp30241a->where('created_at', '<=', $sp8093ee . ' 23:59:59'); } $sp542adc = (int) $sp517903->input('current_page', 1); $spf40cb2 = (int) $sp517903->input('per_page', 20); $sp38cdfb = $sp30241a->orderBy('created_at', 'DESC')->paginate($spf40cb2, array('*'), 'page', $sp542adc); return Response::success($sp38cdfb); } }