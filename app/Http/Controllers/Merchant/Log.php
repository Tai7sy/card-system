<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $sp510ef3) { $sp3546ff = $sp510ef3->input('user_id'); $spd37abf = $sp510ef3->input('action', \App\Log::ACTION_LOGIN); $sp90af04 = \App\Log::where('action', $spd37abf); $sp90af04->where('user_id', Auth::id()); $sp7646e7 = $sp510ef3->input('start_at'); if (strlen($sp7646e7)) { $sp90af04->where('created_at', '>=', $sp7646e7 . ' 00:00:00'); } $spd7f197 = $sp510ef3->input('end_at'); if (strlen($spd7f197)) { $sp90af04->where('created_at', '<=', $spd7f197 . ' 23:59:59'); } $spb02a8e = (int) $sp510ef3->input('current_page', 1); $sp95f730 = (int) $sp510ef3->input('per_page', 20); $spe24324 = $sp90af04->orderBy('created_at', 'DESC')->paginate($sp95f730, array('*'), 'page', $spb02a8e); return Response::success($spe24324); } }