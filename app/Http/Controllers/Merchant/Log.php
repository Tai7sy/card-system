<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $spccbfb6) { $spe58da5 = $spccbfb6->input('user_id'); $spd8aa78 = $spccbfb6->input('action', \App\Log::ACTION_LOGIN); $sp479bde = \App\Log::where('action', $spd8aa78); $sp479bde->where('user_id', Auth::id()); $spc92f5a = $spccbfb6->input('start_at'); if (strlen($spc92f5a)) { $sp479bde->where('created_at', '>=', $spc92f5a . ' 00:00:00'); } $sp3bcd4b = $spccbfb6->input('end_at'); if (strlen($sp3bcd4b)) { $sp479bde->where('created_at', '<=', $sp3bcd4b . ' 23:59:59'); } $sp1e473f = (int) $spccbfb6->input('current_page', 1); $sped1e1d = (int) $spccbfb6->input('per_page', 20); $sp7d3bbd = $sp479bde->orderBy('created_at', 'DESC')->paginate($sped1e1d, array('*'), 'page', $sp1e473f); return Response::success($sp7d3bbd); } }