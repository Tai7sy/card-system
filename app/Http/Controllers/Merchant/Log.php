<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $spa20801) { $sp6fe8b9 = $spa20801->input('user_id'); $spf6340a = $spa20801->input('action', \App\Log::ACTION_LOGIN); $sp6c3275 = \App\Log::where('action', $spf6340a); $sp6c3275->where('user_id', Auth::id()); $spdb63a7 = $spa20801->input('start_at'); if (strlen($spdb63a7)) { $sp6c3275->where('created_at', '>=', $spdb63a7 . ' 00:00:00'); } $sp45fd5a = $spa20801->input('end_at'); if (strlen($sp45fd5a)) { $sp6c3275->where('created_at', '<=', $sp45fd5a . ' 23:59:59'); } $sp2c377e = (int) $spa20801->input('current_page', 1); $sp896436 = (int) $spa20801->input('per_page', 20); $spa79e9a = $sp6c3275->orderBy('created_at', 'DESC')->paginate($sp896436, array('*'), 'page', $sp2c377e); return Response::success($spa79e9a); } }