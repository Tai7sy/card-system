<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $spfb41ce) { $sp1e2a07 = $spfb41ce->post('user_id'); $specf52d = $spfb41ce->post('action', \App\Log::ACTION_LOGIN); $sp61dd0f = \App\Log::where('action', $specf52d); $sp61dd0f->where('user_id', Auth::id()); $spd926d3 = $spfb41ce->post('start_at'); if (strlen($spd926d3)) { $sp61dd0f->where('created_at', '>=', $spd926d3 . ' 00:00:00'); } $sp8a56b7 = $spfb41ce->post('end_at'); if (strlen($sp8a56b7)) { $sp61dd0f->where('created_at', '<=', $sp8a56b7 . ' 23:59:59'); } $sp91e8e3 = $spfb41ce->post('current_page', 1); $sp3cad87 = $spfb41ce->post('per_page', 20); $sp32d442 = $sp61dd0f->orderBy('created_at', 'DESC')->paginate($sp3cad87, array('*'), 'page', $sp91e8e3); return Response::success($sp32d442); } }