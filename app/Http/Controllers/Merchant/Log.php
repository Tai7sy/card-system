<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $sp7f7104) { $sp279789 = $sp7f7104->input('user_id'); $sp3b644d = $sp7f7104->input('action', \App\Log::ACTION_LOGIN); $spbec213 = \App\Log::where('action', $sp3b644d); $spbec213->where('user_id', Auth::id()); $spdf4097 = $sp7f7104->input('start_at'); if (strlen($spdf4097)) { $spbec213->where('created_at', '>=', $spdf4097 . ' 00:00:00'); } $spc34463 = $sp7f7104->input('end_at'); if (strlen($spc34463)) { $spbec213->where('created_at', '<=', $spc34463 . ' 23:59:59'); } $spfe8869 = (int) $sp7f7104->input('current_page', 1); $spec5082 = (int) $sp7f7104->input('per_page', 20); $spa229b5 = $spbec213->orderBy('created_at', 'DESC')->paginate($spec5082, array('*'), 'page', $spfe8869); return Response::success($spa229b5); } }