<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $spbaac90) { $sp45cf7f = $spbaac90->post('user_id'); $sp5904b1 = $spbaac90->post('action', \App\Log::ACTION_LOGIN); $sp50919b = \App\Log::where('action', $sp5904b1); $sp50919b->where('user_id', Auth::id()); $sp4bb16c = $spbaac90->post('start_at'); if (strlen($sp4bb16c)) { $sp50919b->where('created_at', '>=', $sp4bb16c . ' 00:00:00'); } $sp574dc3 = $spbaac90->post('end_at'); if (strlen($sp574dc3)) { $sp50919b->where('created_at', '<=', $sp574dc3 . ' 23:59:59'); } $spb32f8f = $spbaac90->post('current_page', 1); $sp731c42 = $spbaac90->post('per_page', 20); $spd5d914 = $sp50919b->orderBy('created_at', 'DESC')->paginate($sp731c42, array('*'), 'page', $spb32f8f); return Response::success($spd5d914); } }