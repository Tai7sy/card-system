<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $sp054aa0) { $sp47762c = $sp054aa0->post('user_id'); $sp41bae1 = $sp054aa0->post('action', \App\Log::ACTION_LOGIN); $sp0964e2 = \App\Log::where('action', $sp41bae1); $sp0964e2->where('user_id', Auth::id()); $sp83f694 = $sp054aa0->post('start_at'); if (strlen($sp83f694)) { $sp0964e2->where('created_at', '>=', $sp83f694 . ' 00:00:00'); } $sp58b3dd = $sp054aa0->post('end_at'); if (strlen($sp58b3dd)) { $sp0964e2->where('created_at', '<=', $sp58b3dd . ' 23:59:59'); } $sp1d90fd = $sp054aa0->post('current_page', 1); $sp21d879 = $sp054aa0->post('per_page', 20); $sp03b529 = $sp0964e2->orderBy('created_at', 'DESC')->paginate($sp21d879, array('*'), 'page', $sp1d90fd); return Response::success($sp03b529); } }