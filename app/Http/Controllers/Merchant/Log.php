<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $sp3c91bd) { $spdad372 = $sp3c91bd->post('user_id'); $sp60a232 = $sp3c91bd->post('action', \App\Log::ACTION_LOGIN); $sp6cb35e = \App\Log::where('action', $sp60a232); $sp6cb35e->where('user_id', Auth::id()); $spabaafc = $sp3c91bd->post('start_at'); if (strlen($spabaafc)) { $sp6cb35e->where('created_at', '>=', $spabaafc . ' 00:00:00'); } $sp250c03 = $sp3c91bd->post('end_at'); if (strlen($sp250c03)) { $sp6cb35e->where('created_at', '<=', $sp250c03 . ' 23:59:59'); } $spf8ae2a = $sp3c91bd->post('current_page', 1); $spa4d3d7 = $sp3c91bd->post('per_page', 20); $spdecb4c = $sp6cb35e->orderBy('created_at', 'DESC')->paginate($spa4d3d7, array('*'), 'page', $spf8ae2a); return Response::success($spdecb4c); } }