<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $spd5cc4d) { $spfaef2f = $spd5cc4d->post('user_id'); $spe8591d = $spd5cc4d->post('action', \App\Log::ACTION_LOGIN); $spe440a8 = \App\Log::where('action', $spe8591d); $spe440a8->where('user_id', Auth::id()); $sp70e85e = $spd5cc4d->post('start_at'); if (strlen($sp70e85e)) { $spe440a8->where('created_at', '>=', $sp70e85e . ' 00:00:00'); } $spd3c891 = $spd5cc4d->post('end_at'); if (strlen($spd3c891)) { $spe440a8->where('created_at', '<=', $spd3c891 . ' 23:59:59'); } $sp707577 = $spd5cc4d->post('current_page', 1); $sp82c87f = $spd5cc4d->post('per_page', 20); $sp78c70b = $spe440a8->orderBy('created_at', 'DESC')->paginate($sp82c87f, array('*'), 'page', $sp707577); return Response::success($sp78c70b); } }