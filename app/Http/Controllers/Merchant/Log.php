<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $sp375069) { $spc2f05b = $sp375069->input('user_id'); $spad360b = $sp375069->input('action', \App\Log::ACTION_LOGIN); $sped9569 = \App\Log::where('action', $spad360b); $sped9569->where('user_id', Auth::id()); $sp1dc097 = $sp375069->input('start_at'); if (strlen($sp1dc097)) { $sped9569->where('created_at', '>=', $sp1dc097 . ' 00:00:00'); } $spa94d7a = $sp375069->input('end_at'); if (strlen($spa94d7a)) { $sped9569->where('created_at', '<=', $spa94d7a . ' 23:59:59'); } $sp19fe4a = (int) $sp375069->input('current_page', 1); $sp90d207 = (int) $sp375069->input('per_page', 20); $sp3aa6bd = $sped9569->orderBy('created_at', 'DESC')->paginate($sp90d207, array('*'), 'page', $sp19fe4a); return Response::success($sp3aa6bd); } }