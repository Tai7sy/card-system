<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $spdf16c9) { $spf93fb1 = $spdf16c9->input('user_id'); $sp97d013 = $spdf16c9->input('action', \App\Log::ACTION_LOGIN); $spc64cdd = \App\Log::where('action', $sp97d013); $spc64cdd->where('user_id', Auth::id()); $sp69bdaa = $spdf16c9->input('start_at'); if (strlen($sp69bdaa)) { $spc64cdd->where('created_at', '>=', $sp69bdaa . ' 00:00:00'); } $spac7caa = $spdf16c9->input('end_at'); if (strlen($spac7caa)) { $spc64cdd->where('created_at', '<=', $spac7caa . ' 23:59:59'); } $sp7ec90f = (int) $spdf16c9->input('current_page', 1); $spc4a487 = (int) $spdf16c9->input('per_page', 20); $sp61ff14 = $spc64cdd->orderBy('created_at', 'DESC')->paginate($spc4a487, array('*'), 'page', $sp7ec90f); return Response::success($sp61ff14); } }