<?php
namespace App\Http\Controllers\Merchant; use App\Library\Response; use Illuminate\Http\Request; use App\Http\Controllers\Controller; use Illuminate\Support\Facades\Auth; class Log extends Controller { function get(Request $spf066f3) { $sp15a746 = $spf066f3->post('user_id'); $sp3786fd = $spf066f3->post('action', \App\Log::ACTION_LOGIN); $sp5044a7 = \App\Log::where('action', $sp3786fd); $sp5044a7->where('user_id', Auth::id()); $spba7d12 = $spf066f3->post('start_at'); if (strlen($spba7d12)) { $sp5044a7->where('created_at', '>=', $spba7d12 . ' 00:00:00'); } $sp3bf1fb = $spf066f3->post('end_at'); if (strlen($sp3bf1fb)) { $sp5044a7->where('created_at', '<=', $sp3bf1fb . ' 23:59:59'); } $sp72b123 = $spf066f3->post('current_page', 1); $spcfcad4 = $spf066f3->post('per_page', 20); $sp293456 = $sp5044a7->orderBy('created_at', 'DESC')->paginate($spcfcad4, array('*'), 'page', $sp72b123); return Response::success($sp293456); } }