<?php
class WxPayNotify extends WxPayNotifyReply { public final function Handle($spd879ed = true) { $spbbda25 = WxpayApi::notify(array($this, 'NotifyCallBack'), $sp093e23); if ($spbbda25 == false) { $this->SetReturn_code('FAIL'); $this->SetReturn_msg($sp093e23); $this->ReplyNotify(false); return; } else { $this->SetReturn_code('SUCCESS'); $this->SetReturn_msg('OK'); } $this->ReplyNotify($spd879ed); } public function NotifyProcess($sp5aa598, &$sp093e23) { return true; } public final function NotifyCallBack($sp5aa598) { $sp093e23 = 'OK'; $spbbda25 = $this->NotifyProcess($sp5aa598, $sp093e23); if ($spbbda25 == true) { $this->SetReturn_code('SUCCESS'); $this->SetReturn_msg('OK'); } else { $this->SetReturn_code('FAIL'); $this->SetReturn_msg($sp093e23); } return $spbbda25; } private final function ReplyNotify($spd879ed = true) { if ($spd879ed == true && $this->GetReturn_code() == 'SUCCESS') { $this->SetSign(); } WxpayApi::replyNotify($this->ToXml()); } }