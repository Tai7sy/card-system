<?php
namespace App\Library\Pay\Youzan\Open; class Http { private static $boundary = ''; public static function get($sp3ae187, $sp3e77f9) { $sp3ae187 = $sp3ae187 . '?' . http_build_query($sp3e77f9); return self::http($sp3ae187, 'GET'); } public static function post($sp3ae187, $sp3e77f9, $sp7b568a = array()) { $spdf7b97 = array(); if (!$sp7b568a) { $sp224c81 = http_build_query($sp3e77f9); } else { $sp224c81 = self::buildHttpQueryMulti($sp3e77f9, $sp7b568a); $spdf7b97[] = 'Content-Type: multipart/form-data; boundary=' . self::$boundary; } return self::http($sp3ae187, 'POST', $sp224c81, $spdf7b97); } private static function http($sp3ae187, $sp888af6, $spcfafa8 = NULL, $spdf7b97 = array()) { $sp3ddf56 = curl_init(); curl_setopt($sp3ddf56, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_0); curl_setopt($sp3ddf56, CURLOPT_USERAGENT, 'X-YZ-Client 2.0.0 - PHP'); curl_setopt($sp3ddf56, CURLOPT_CONNECTTIMEOUT, 30); curl_setopt($sp3ddf56, CURLOPT_TIMEOUT, 30); curl_setopt($sp3ddf56, CURLOPT_RETURNTRANSFER, TRUE); curl_setopt($sp3ddf56, CURLOPT_ENCODING, ''); curl_setopt($sp3ddf56, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($sp3ddf56, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($sp3ddf56, CURLOPT_HEADER, FALSE); switch ($sp888af6) { case 'POST': curl_setopt($sp3ddf56, CURLOPT_POST, TRUE); if (!empty($spcfafa8)) { curl_setopt($sp3ddf56, CURLOPT_POSTFIELDS, $spcfafa8); } break; } curl_setopt($sp3ddf56, CURLOPT_URL, $sp3ae187); curl_setopt($sp3ddf56, CURLOPT_HTTPHEADER, $spdf7b97); curl_setopt($sp3ddf56, CURLINFO_HEADER_OUT, TRUE); $spad32e6 = curl_exec($sp3ddf56); $sp8be556 = curl_getinfo($sp3ddf56, CURLINFO_HTTP_CODE); $sp85c732 = curl_getinfo($sp3ddf56); curl_close($sp3ddf56); return $spad32e6; } private static function buildHttpQueryMulti($sp3e77f9, $sp7b568a) { if (!$sp3e77f9) { return ''; } $sp58bfe8 = array(); self::$boundary = $spf7a9c8 = uniqid('------------------'); $spe48ea1 = '--' . $spf7a9c8; $sp06b98e = $spe48ea1 . '--'; $sp47f716 = ''; foreach ($sp3e77f9 as $sp7b7024 => $spc82d84) { $sp47f716 .= $spe48ea1 . '
'; $sp47f716 .= 'content-disposition: form-data; name="' . $sp7b7024 . '"

'; $sp47f716 .= $spc82d84 . '
'; } foreach ($sp7b568a as $sp7b7024 => $spc82d84) { if (!$spc82d84) { continue; } if (is_array($spc82d84)) { $sp3ae187 = $spc82d84['url']; if (isset($spc82d84['name'])) { $spe07708 = $spc82d84['name']; } else { $sp187af2 = explode('?', basename($spc82d84['url'])); $spe07708 = $sp187af2[0]; } $spd94d9f = isset($spc82d84['field']) ? $spc82d84['field'] : $sp7b7024; } else { $sp3ae187 = $spc82d84; $sp187af2 = explode('?', basename($sp3ae187)); $spe07708 = $sp187af2[0]; $spd94d9f = $sp7b7024; } $sp1ecafd = file_get_contents($sp3ae187); $sp47f716 .= $spe48ea1 . '
'; $sp47f716 .= 'Content-Disposition: form-data; name="' . $spd94d9f . '"; filename="' . $spe07708 . '"' . '
'; $sp47f716 .= 'Content-Type: image/unknown

'; $sp47f716 .= $sp1ecafd . '
'; } $sp47f716 .= $sp06b98e; return $sp47f716; } }