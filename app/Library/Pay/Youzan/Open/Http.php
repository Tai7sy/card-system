<?php
namespace App\Library\Pay\Youzan\Open; class Http { private static $boundary = ''; public static function get($spd2457c, $spc0e525) { $spd2457c = $spd2457c . '?' . http_build_query($spc0e525); return self::http($spd2457c, 'GET'); } public static function post($spd2457c, $spc0e525, $spf01fac = array()) { $spc69671 = array(); if (!$spf01fac) { $spd0789a = http_build_query($spc0e525); } else { $spd0789a = self::buildHttpQueryMulti($spc0e525, $spf01fac); $spc69671[] = 'Content-Type: multipart/form-data; boundary=' . self::$boundary; } return self::http($spd2457c, 'POST', $spd0789a, $spc69671); } private static function http($spd2457c, $spd0c59e, $spacf217 = NULL, $spc69671 = array()) { $spcf036f = curl_init(); curl_setopt($spcf036f, CURLOPT_HTTP_VERSION, CURL_HTTP_VERSION_1_0); curl_setopt($spcf036f, CURLOPT_USERAGENT, 'X-YZ-Client 2.0.0 - PHP'); curl_setopt($spcf036f, CURLOPT_CONNECTTIMEOUT, 30); curl_setopt($spcf036f, CURLOPT_TIMEOUT, 30); curl_setopt($spcf036f, CURLOPT_RETURNTRANSFER, TRUE); curl_setopt($spcf036f, CURLOPT_ENCODING, ''); curl_setopt($spcf036f, CURLOPT_SSL_VERIFYPEER, false); curl_setopt($spcf036f, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($spcf036f, CURLOPT_HEADER, FALSE); switch ($spd0c59e) { case 'POST': curl_setopt($spcf036f, CURLOPT_POST, TRUE); if (!empty($spacf217)) { curl_setopt($spcf036f, CURLOPT_POSTFIELDS, $spacf217); } break; } curl_setopt($spcf036f, CURLOPT_URL, $spd2457c); curl_setopt($spcf036f, CURLOPT_HTTPHEADER, $spc69671); curl_setopt($spcf036f, CURLINFO_HEADER_OUT, TRUE); $spdc5091 = curl_exec($spcf036f); $spf43adc = curl_getinfo($spcf036f, CURLINFO_HTTP_CODE); $spd6f265 = curl_getinfo($spcf036f); curl_close($spcf036f); return $spdc5091; } private static function buildHttpQueryMulti($spc0e525, $spf01fac) { if (!$spc0e525) { return ''; } $spc32c29 = array(); self::$boundary = $sp31a268 = uniqid('------------------'); $sp1f6313 = '--' . $sp31a268; $sp21f9f7 = $sp1f6313 . '--'; $sp071f42 = ''; foreach ($spc0e525 as $spf1241f => $sp8b9401) { $sp071f42 .= $sp1f6313 . '
'; $sp071f42 .= 'content-disposition: form-data; name="' . $spf1241f . '"

'; $sp071f42 .= $sp8b9401 . '
'; } foreach ($spf01fac as $spf1241f => $sp8b9401) { if (!$sp8b9401) { continue; } if (is_array($sp8b9401)) { $spd2457c = $sp8b9401['url']; if (isset($sp8b9401['name'])) { $sp246163 = $sp8b9401['name']; } else { $sp5271cd = explode('?', basename($sp8b9401['url'])); $sp246163 = $sp5271cd[0]; } $spe0d59e = isset($sp8b9401['field']) ? $sp8b9401['field'] : $spf1241f; } else { $spd2457c = $sp8b9401; $sp5271cd = explode('?', basename($spd2457c)); $sp246163 = $sp5271cd[0]; $spe0d59e = $spf1241f; } $sp91a581 = file_get_contents($spd2457c); $sp071f42 .= $sp1f6313 . '
'; $sp071f42 .= 'Content-Disposition: form-data; name="' . $spe0d59e . '"; filename="' . $sp246163 . '"' . '
'; $sp071f42 .= 'Content-Type: image/unknown

'; $sp071f42 .= $sp91a581 . '
'; } $sp071f42 .= $sp21f9f7; return $sp071f42; } }