<?php
function createLinkString($sp7a655e) { $sp57c72a = ''; foreach ($sp7a655e as $spf1241f => $sp91e29b) { $sp57c72a .= $spf1241f . '=' . $sp91e29b . '&'; } $sp57c72a = substr($sp57c72a, 0, strlen($sp57c72a) - 1); if (get_magic_quotes_gpc()) { $sp57c72a = stripslashes($sp57c72a); } return $sp57c72a; } function createLinkStringUrlEncode($sp7a655e) { $sp57c72a = ''; foreach ($sp7a655e as $spf1241f => $sp91e29b) { $sp57c72a .= $spf1241f . '=' . urlencode($sp91e29b) . '&'; } $sp57c72a = substr($sp57c72a, 0, strlen($sp57c72a) - 1); if (get_magic_quotes_gpc()) { $sp57c72a = stripslashes($sp57c72a); } return $sp57c72a; } function paraFilter($sp7a655e) { $sp959d7d = array(); foreach ($sp7a655e as $spf1241f => $sp91e29b) { if ($spf1241f == 'sign' || $spf1241f == 'sign_type' || $sp91e29b == '') { continue; } else { $sp959d7d[$spf1241f] = $sp7a655e[$spf1241f]; } } return $sp959d7d; } function argSort($sp7a655e) { ksort($sp7a655e); reset($sp7a655e); return $sp7a655e; } function logResult($sp6b9ea7 = '') { $sp26c226 = fopen('log.txt', 'a'); flock($sp26c226, LOCK_EX); fwrite($sp26c226, '执行日期：' . strftime('%Y%m%d%H%M%S', time()) . '
' . $sp6b9ea7 . '
'); flock($sp26c226, LOCK_UN); fclose($sp26c226); } function getHttpResponsePOST($spd2457c, $spb20fc5, $sp7a655e, $sp100d5e = '') { if (trim($sp100d5e) != '') { $spd2457c = $spd2457c . '_input_charset=' . $sp100d5e; } $sp4f6936 = curl_init($spd2457c); curl_setopt($sp4f6936, CURLOPT_SSL_VERIFYPEER, true); curl_setopt($sp4f6936, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($sp4f6936, CURLOPT_CAINFO, $spb20fc5); curl_setopt($sp4f6936, CURLOPT_HEADER, 0); curl_setopt($sp4f6936, CURLOPT_RETURNTRANSFER, 1); curl_setopt($sp4f6936, CURLOPT_POST, true); curl_setopt($sp4f6936, CURLOPT_POSTFIELDS, $sp7a655e); $spd71532 = curl_exec($sp4f6936); curl_close($sp4f6936); return $spd71532; } function getHttpResponseGET($spd2457c, $spbaf24b) { $sp4f6936 = curl_init($spd2457c); curl_setopt($sp4f6936, CURLOPT_HEADER, 0); curl_setopt($sp4f6936, CURLOPT_RETURNTRANSFER, 1); curl_setopt($sp4f6936, CURLOPT_SSL_VERIFYPEER, true); curl_setopt($sp4f6936, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($sp4f6936, CURLOPT_CAINFO, $spbaf24b); $spd71532 = curl_exec($sp4f6936); curl_close($sp4f6936); return $spd71532; } function charsetEncode($spfaaf1d, $sp86132c, $sp968514) { $spc30c34 = ''; if (!isset($sp86132c)) { $sp86132c = $sp968514; } if ($sp968514 == $sp86132c || $spfaaf1d == null) { $spc30c34 = $spfaaf1d; } elseif (function_exists('mb_convert_encoding')) { $spc30c34 = mb_convert_encoding($spfaaf1d, $sp86132c, $sp968514); } elseif (function_exists('iconv')) { $spc30c34 = iconv($sp968514, $sp86132c, $spfaaf1d); } else { die('sorry, you have no libs support for charset change.'); } return $spc30c34; } function charsetDecode($spfaaf1d, $sp968514, $sp86132c) { if (!isset($sp968514)) { $sp86132c = $sp968514; } if ($sp968514 == $sp86132c || $spfaaf1d == null) { $spc30c34 = $spfaaf1d; } elseif (function_exists('mb_convert_encoding')) { $spc30c34 = mb_convert_encoding($spfaaf1d, $sp86132c, $sp968514); } elseif (function_exists('iconv')) { $spc30c34 = iconv($sp968514, $sp86132c, $spfaaf1d); } else { die('sorry, you have no libs support for charset changes.'); } return $spc30c34; } function md5Sign($sp753e95, $spf1241f) { $sp753e95 = $sp753e95 . $spf1241f; return md5($sp753e95); } function md5Verify($sp753e95, $sp964415, $spf1241f) { $sp753e95 = $sp753e95 . $spf1241f; $sped9e7f = md5($sp753e95); if ($sped9e7f == $sp964415) { return true; } else { return false; } }