<?php
function createLinkString($sp012ade) { $spe3a1c2 = ''; foreach ($sp012ade as $sp7b7024 => $spcb4459) { $spe3a1c2 .= $sp7b7024 . '=' . $spcb4459 . '&'; } $spe3a1c2 = substr($spe3a1c2, 0, strlen($spe3a1c2) - 1); if (get_magic_quotes_gpc()) { $spe3a1c2 = stripslashes($spe3a1c2); } return $spe3a1c2; } function createLinkStringUrlEncode($sp012ade) { $spe3a1c2 = ''; foreach ($sp012ade as $sp7b7024 => $spcb4459) { $spe3a1c2 .= $sp7b7024 . '=' . urlencode($spcb4459) . '&'; } $spe3a1c2 = substr($spe3a1c2, 0, strlen($spe3a1c2) - 1); if (get_magic_quotes_gpc()) { $spe3a1c2 = stripslashes($spe3a1c2); } return $spe3a1c2; } function paraFilter($sp012ade) { $sp126299 = array(); foreach ($sp012ade as $sp7b7024 => $spcb4459) { if ($sp7b7024 == 'sign' || $sp7b7024 == 'sign_type' || $spcb4459 == '') { continue; } else { $sp126299[$sp7b7024] = $sp012ade[$sp7b7024]; } } return $sp126299; } function argSort($sp012ade) { ksort($sp012ade); reset($sp012ade); return $sp012ade; } function logResult($sp8dee18 = '') { $sp82a428 = fopen('log.txt', 'a'); flock($sp82a428, LOCK_EX); fwrite($sp82a428, '执行日期：' . strftime('%Y%m%d%H%M%S', time()) . '
' . $sp8dee18 . '
'); flock($sp82a428, LOCK_UN); fclose($sp82a428); } function getHttpResponsePOST($sp3ae187, $spdb994b, $sp012ade, $sp8cabb2 = '') { if (trim($sp8cabb2) != '') { $sp3ae187 = $sp3ae187 . '_input_charset=' . $sp8cabb2; } $spfe4f44 = curl_init($sp3ae187); curl_setopt($spfe4f44, CURLOPT_SSL_VERIFYPEER, true); curl_setopt($spfe4f44, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($spfe4f44, CURLOPT_CAINFO, $spdb994b); curl_setopt($spfe4f44, CURLOPT_HEADER, 0); curl_setopt($spfe4f44, CURLOPT_RETURNTRANSFER, 1); curl_setopt($spfe4f44, CURLOPT_POST, true); curl_setopt($spfe4f44, CURLOPT_POSTFIELDS, $sp012ade); $sp15bb7f = curl_exec($spfe4f44); curl_close($spfe4f44); return $sp15bb7f; } function getHttpResponseGET($sp3ae187, $spb7d1b9) { $spfe4f44 = curl_init($sp3ae187); curl_setopt($spfe4f44, CURLOPT_HEADER, 0); curl_setopt($spfe4f44, CURLOPT_RETURNTRANSFER, 1); curl_setopt($spfe4f44, CURLOPT_SSL_VERIFYPEER, true); curl_setopt($spfe4f44, CURLOPT_SSL_VERIFYHOST, 2); curl_setopt($spfe4f44, CURLOPT_CAINFO, $spb7d1b9); $sp15bb7f = curl_exec($spfe4f44); curl_close($spfe4f44); return $sp15bb7f; } function charsetEncode($spd72f9e, $sp5a20f4, $spc19241) { $sp5e4442 = ''; if (!isset($sp5a20f4)) { $sp5a20f4 = $spc19241; } if ($spc19241 == $sp5a20f4 || $spd72f9e == null) { $sp5e4442 = $spd72f9e; } elseif (function_exists('mb_convert_encoding')) { $sp5e4442 = mb_convert_encoding($spd72f9e, $sp5a20f4, $spc19241); } elseif (function_exists('iconv')) { $sp5e4442 = iconv($spc19241, $sp5a20f4, $spd72f9e); } else { die('sorry, you have no libs support for charset change.'); } return $sp5e4442; } function charsetDecode($spd72f9e, $spc19241, $sp5a20f4) { if (!isset($spc19241)) { $sp5a20f4 = $spc19241; } if ($spc19241 == $sp5a20f4 || $spd72f9e == null) { $sp5e4442 = $spd72f9e; } elseif (function_exists('mb_convert_encoding')) { $sp5e4442 = mb_convert_encoding($spd72f9e, $sp5a20f4, $spc19241); } elseif (function_exists('iconv')) { $sp5e4442 = iconv($spc19241, $sp5a20f4, $spd72f9e); } else { die('sorry, you have no libs support for charset changes.'); } return $sp5e4442; } function md5Sign($spf28067, $sp7b7024) { $spf28067 = $spf28067 . $sp7b7024; return md5($spf28067); } function md5Verify($spf28067, $sp75e4cc, $sp7b7024) { $spf28067 = $spf28067 . $sp7b7024; $sp072f3e = md5($spf28067); if ($sp072f3e == $sp75e4cc) { return true; } else { return false; } }