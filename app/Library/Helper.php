<?php
namespace App\Library; use Hashids\Hashids; class Helper { public static function getMysqlDate($spbcd829 = 0) { return date('Y-m-d', time() + $spbcd829 * 24 * 3600); } public static function getIP() { if (isset($_SERVER)) { if (isset($_SERVER['HTTP_X_FORWARDED_FOR'])) { $sp0bbe31 = $_SERVER['HTTP_X_FORWARDED_FOR']; } else { if (isset($_SERVER['HTTP_CLIENT_IP'])) { $sp0bbe31 = $_SERVER['HTTP_CLIENT_IP']; } else { $sp0bbe31 = @$_SERVER['REMOTE_ADDR']; } } } else { if (getenv('HTTP_X_FORWARDED_FOR')) { $sp0bbe31 = getenv('HTTP_X_FORWARDED_FOR'); } else { if (getenv('HTTP_CLIENT_IP')) { $sp0bbe31 = getenv('HTTP_CLIENT_IP'); } else { $sp0bbe31 = getenv('REMOTE_ADDR'); } } } if (strpos($sp0bbe31, ',') !== FALSE) { $sp4dfa28 = explode(',', $sp0bbe31); return $sp4dfa28[0]; } return $sp0bbe31; } public static function getClientIP() { if (isset($_SERVER)) { $sp0bbe31 = $_SERVER['REMOTE_ADDR']; } else { $sp0bbe31 = getenv('REMOTE_ADDR'); } if (strpos($sp0bbe31, ',') !== FALSE) { $sp4dfa28 = explode(',', $sp0bbe31); return $sp4dfa28[0]; } return $sp0bbe31; } public static function filterWords($spd79a8f, $spb8db8e) { if (!$spd79a8f) { return false; } if (!is_array($spb8db8e)) { $spb8db8e = explode('|', $spb8db8e); } foreach ($spb8db8e as $spfa6af9) { if ($spfa6af9 && strpos($spd79a8f, $spfa6af9) !== FALSE) { return $spfa6af9; } } return false; } public static function is_idcard($sp14be80) { if (strlen($sp14be80) == 18) { return self::idcard_checksum18($sp14be80); } elseif (strlen($sp14be80) == 15) { $sp14be80 = self::idcard_15to18($sp14be80); return self::idcard_checksum18($sp14be80); } else { return false; } } private static function idcard_verify_number($sp59b22b) { if (strlen($sp59b22b) != 17) { return false; } $sp482761 = array(7, 9, 10, 5, 8, 4, 2, 1, 6, 3, 7, 9, 10, 5, 8, 4, 2); $spf53ee8 = array('1', '0', 'X', '9', '8', '7', '6', '5', '4', '3', '2'); $sp9fe100 = 0; for ($spec1f96 = 0; $spec1f96 < strlen($sp59b22b); $spec1f96++) { $sp9fe100 += substr($sp59b22b, $spec1f96, 1) * $sp482761[$spec1f96]; } $sp5b6e5b = $sp9fe100 % 11; $sp486223 = $spf53ee8[$sp5b6e5b]; return $sp486223; } private static function idcard_15to18($sp1c41cc) { if (strlen($sp1c41cc) != 15) { return false; } else { if (array_search(substr($sp1c41cc, 12, 3), array('996', '997', '998', '999')) !== false) { $sp1c41cc = substr($sp1c41cc, 0, 6) . '18' . substr($sp1c41cc, 6, 9); } else { $sp1c41cc = substr($sp1c41cc, 0, 6) . '19' . substr($sp1c41cc, 6, 9); } } $sp1c41cc = $sp1c41cc . self::idcard_verify_number($sp1c41cc); return $sp1c41cc; } private static function idcard_checksum18($sp1c41cc) { if (strlen($sp1c41cc) != 18) { return false; } $sp59b22b = substr($sp1c41cc, 0, 17); if (self::idcard_verify_number($sp59b22b) != strtoupper(substr($sp1c41cc, 17, 1))) { return false; } else { return true; } } public static function str_between($spd79a8f, $sp75d378, $sp03d5e0) { $spaa9216 = strpos($spd79a8f, $sp75d378); if ($spaa9216 === false) { return ''; } $sp66637c = strpos($spd79a8f, $sp03d5e0, $spaa9216 + strlen($sp75d378)); if ($sp66637c === false || $spaa9216 >= $sp66637c) { return ''; } $spc279e9 = strlen($sp75d378); $sp179a17 = substr($spd79a8f, $spaa9216 + $spc279e9, $sp66637c - $spaa9216 - $spc279e9); return $sp179a17; } public static function str_between_longest($spd79a8f, $sp75d378, $sp03d5e0) { $spaa9216 = strpos($spd79a8f, $sp75d378); if ($spaa9216 === false) { return ''; } $sp66637c = strrpos($spd79a8f, $sp03d5e0, $spaa9216 + strlen($sp75d378)); if ($sp66637c === false || $spaa9216 >= $sp66637c) { return ''; } $spc279e9 = strlen($sp75d378); $sp179a17 = substr($spd79a8f, $spaa9216 + $spc279e9, $sp66637c - $spaa9216 - $spc279e9); return $sp179a17; } public static function format_url($sp18a6d4) { if (!strlen($sp18a6d4)) { return $sp18a6d4; } if (!starts_with($sp18a6d4, 'http://') && !starts_with($sp18a6d4, 'https://')) { $sp18a6d4 = 'http://' . $sp18a6d4; } while (ends_with($sp18a6d4, '/')) { $sp18a6d4 = substr($sp18a6d4, 0, -1); } return $sp18a6d4; } public static function lite_hash($spd79a8f) { $spc971b8 = crc32((string) $spd79a8f); if ($spc971b8 < 0) { $spc971b8 &= 1 << 7; } return $spc971b8; } const ID_TYPE_USER = 0; const ID_TYPE_CATEGORY = 1; const ID_TYPE_PRODUCT = 2; const ID_TYPE_AFFILIATE = 3; public static function id_encode($spbc2f9d, $spf46b4f, ...$spa47734) { $spbd8221 = new Hashids(config('app.key'), 8, 'abcdefghijklmnopqrstuvwxyz1234567890'); return @$spbd8221->encode(self::lite_hash($spbc2f9d), $spbc2f9d, self::lite_hash($spf46b4f), $spf46b4f, ...$spa47734); } public static function id_decode($spa4c558, $spf46b4f, &$sp512f7c = false) { if (strlen($spa4c558) < 8) { $spbd8221 = new Hashids(config('app.key')); if ($spf46b4f === self::ID_TYPE_USER) { return intval(@$spbd8221->decodeHex($spa4c558)); } else { return intval(@$spbd8221->decode($spa4c558)[0]); } } $spbd8221 = new Hashids(config('app.key'), 8, 'abcdefghijklmnopqrstuvwxyz1234567890'); $sp512f7c = @$spbd8221->decode($spa4c558) ?? array(); return intval($sp512f7c[1]); } public static function is_mobile() { if (isset($_SERVER['HTTP_USER_AGENT'])) { if (preg_match('/(iPhone|iPod|Android|ios|SymbianOS|Windows Phone)/i', $_SERVER['HTTP_USER_AGENT'])) { return true; } } return false; } public static function b1_rand_background() { if (self::is_mobile()) { $sp783782 = array('//ww2.sinaimg.cn/large/ac1a0c4agy1ftxpgyq8n5j20u01hcne2.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxpfyjbd0j20u01hcte2.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxpw3b5mkj20u01hcnfh.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxoybkicbj20u01hc7de.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxpes8rmmj20u01hctn7.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxp8ond6gj20u01hctji.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxp4ljhhvj20u01hck0r.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxpstrwnsj20u01hc7he.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxq2a1vthj20u01hc4gs.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxpiebjztj20u01hcaom.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxow4b14kj20u01hc43x.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxohtyvgfj20u01hc7gk.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxp6vexa3j20u01hcdj3.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxqa0zhc6j20u01hc14e.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxomnbr0gj20u01hc79r.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxpx57f0sj20u01hcqmd.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxoozjilyj20u01hcgt9.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxprigfw1j20u01hcam9.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxod70fcpj20u01hcajj.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxpzb5p1tj20u01hcnca.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxozvry57j20u01hcgwo.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxpv092lfj20u01hcx1o.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxpdz6s0bj20u01hcaqj.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxoso79ayj20u01hcq9c.jpg', '//ww2.sinaimg.cn/large/ac1a0c4agy1ftxpqjrtjhj20u01hcapi.jpg'); } else { $sp783782 = array('//ww1.sinaimg.cn/large/ac1a0c4agy1ftz78cfrj2j21hc0u0kio.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1ftz7qj6l3xj21hc0u0b29.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1ft9tqa2fvpj21hc0u017a.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1ftz71m76skj21hc0u0nnq.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1ftz709py6fj21hc0u0wx2.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1ft9sgqv33lj21hc0u04qp.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1ft9s9soh4sj21hc0u01kx.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1ft9s9r2vkzj21hc0u0x4e.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1ftz7etbcs8j21hc0u07p3.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1ft9sgn1bluj21hc0u0kiy.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1ftz7r6tmv1j21hc0u0anj.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1ftz7c4h0xzj21hc0u01kx.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1ft9tq7uypvj21hc0u01be.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1fwr4pjgbncj21hc0u0kjl.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1ftz7i6u1gxj21hc0u0tyk.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1fwr4s0fb2tj21hc0u01ky.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1ftz72wkr9dj21hc0u0h1r.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1ftz7tj5ohrj21hc0u0qnp.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1ft9sgp23zbj21hc0u0txl.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1ftz7l9dcokj21hc0u0k9k.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1fwr4lvumu1j21hc0u0x6p.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1ftz7alxyhnj21hc0u0nkh.jpg', '//ww1.sinaimg.cn/large/ac1a0c4agy1ftz799gvb3j21hc0u0qdt.jpg'); } return $sp783782[rand(0, count($sp783782) - 1)]; } }